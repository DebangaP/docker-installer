CRON_TZ=Asia/Kolkata
SHELL=/bin/bash
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin

4 9 * * * root cd /app && python /app/kite/KiteWS.py &
16 9 * * * root cd /app && python /app/market/CalculateTPO.py &

# Refresh holdings every 5 minutes during market hours (9 AM to 3:30 PM, Monday to Friday)
*/5 9-16 * * 1-5 root cd /app && python /app/holdings/RefreshHoldings.py >> /app/logs/holdings_refresh.log 2>&1 &
0,5,10,15,20,25,30 15 * * 1-5 root cd /app && python /app/holdings/RefreshHoldings.py >> /app/logs/holdings_refresh.log 2>&1 &

# Fetch options data every 5 minutes during market hours (9 AM to 3:30 PM, Monday to Friday)
*/5 9-16 * * 1-5 root cd /app && python /app/kite/KiteFetchOptions.py >> /app/logs/options_fetch.log 2>&1 &
0,5,10,15,20,25,30 15 * * 1-5 root cd /app && python /app/kite/KiteFetchOptions.py >> /app/logs/options_fetch.log 2>&1 &

# Fetch options data at 10 AM and 3 PM on weekends (Saturday and Sunday)
# Note: 0=Sunday, 6=Saturday in cron syntax
0 10 * * 0,6 root cd /app && python /app/kite/KiteFetchOptions.py >> /app/logs/options_fetch.log 2>&1 &
0 15 * * 0,6 root cd /app && python /app/kite/KiteFetchOptions.py >> /app/logs/options_fetch.log 2>&1 &

# Update OHLC price data once daily (after market close)
0 16 * * 1-5 root cd /app && python /app/kite/InsertOHLC.py >> /app/logs/insert_ohlc.log 2>&1 &

# Refresh swing trade recommendations every 30 minutes during market hours
*/30 9-16 * * 1-5 root cd /app && python /app/stocks/RefreshSwingTrades.py >> /app/logs/swing_trades_refresh.log 2>&1 &

# Refresh MF NAV data daily (after market close)
0 16 * * 1-5 root cd /app && python /app/holdings/RefreshMFNAV.py >> /app/logs/mf_nav_refresh.log 2>&1 &

# Run daily Accumulation/ distribution Analysis at 4:30 pm
30 16 * * 1-5 root cd /app && python /app/scheduled_jobs/AccumulationDistributionScheduler.py >> /app/logs/accum_dist.log 2>&1 &

# Run daily Prophet predictions at 7:00 PM (after market close, OHLC update, and accumulation analysis)
0 16 * * 1-5 root cd /app && python /app/scheduled_jobs/PredictionScheduler.py >> /app/logs/prediction_scheduler.log 2>&1 &

# Run monthly MF portfolio holdings update (on 1st of each month at 5:00 PM)
0 17 1 * * root cd /app && python /app/scheduled_jobs/MFPortfolioScheduler.py >> /app/logs/mf_portfolio_scheduler.log 2>&1 &

# Monitor cron jobs status every 10 minutes during market hours
*/10 9-16 * * 1-5 root cd /app && python /app/scheduled_jobs/CronJobMonitor.py >> /app/logs/cron_monitor.log 2>&1 &